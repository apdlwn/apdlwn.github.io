---
layout: post
title: "README"
subtitle: "과제"
date: 2022-04-11 00:11:10 +0900
background: '/PATH_TO_IMAGE'
---

* [1] 글을 문서로 저장하기

* [2] 해당 문서에서 글을 가져오기

* [3] 그 글을 허프만 압축하기

와 같은 순서로 실행되는 것을 목표로 하고 코드를 짜보았습니다.

### 코드 설명

언어는 JAVA를 사용하였습니다.

`` 기본 ``

작년 프로그래밍(2) 강의를 통해 JAVA를 배우긴 했지만
허프만 코드를 짜며 추가로 학습해야 하는 부분도 있었습니다. 
허프만 코드를 짜기 위해서는 트리 구조가 필요하기 때문에
**Node**라는 이름의 클래스를 선언하여
**character**(입력 문자), **freq**(입력 문자가 사용된 횟수)와 
트리 구조에 필요한 **Node left, right** 필드를 만들어 주었습니다. 


또한 허프만 코드를 짜기 위해서는 우선순위 큐를 사용해야 합니다.
자바에서 우선순위 큐를 구현하는 방법으로는 우선순위 큐 라이브러리를 사용하는 것이 있습니다.
이를 사용하기 위해서는 **java.util.RriorityQueue**를 import해야하고,

```java
PriorityQueue<Node> queue=new PriorityQueue<Node>();
```

와 같이 선언해야 합니다. 

우선순위 큐는 기본적으로 우선순위가 낮은 숫자 순으로 설정됩니다.


우선순위 큐를 이용하기 위해서는 **Node** 를 비교할 수 있는 기준이 필요하기 때문에 **Comparator**을 상속하는 **compareNode**라는 클래스를 선언하여 Node의 빈도수를 기준으로 비교하게 만들었습니다. 

문자에 대응하는 코드를 저장하기 위해 HashMap을 활용하였습니다. 

**coding**은 **글의 길이-1**번만큼 도는 for문으로 허프만 코드를 만들 수 있는 트리를 구성하는 부분입니다.


`` [1] 글을 문서로 저장하기 `` 

간단하게 **FileWrite**를 이용하여 텍스트 파일로 저장하였습니다. 

`` [2] 해당 문서에서 글을 가져오기 `` 

먼저 가져온 글을 저장해놓을 text를 선언하였습니다. File을 이용하여 file를 생성하고 문서의 주소를 넣어주고, Filereader를 사용하여 텍스트를 가져와서 제대로 저장된 것이 맞는지 확인하기 위해 print해줍니다. 

`` [3] 가져온 글을 허프만 압축하기 ``

Node를 비교하기 위해서는 기준이 필요하기 때문에 우선순위 큐를 선언할 때 괄호 안에 기준인 new compareNode()를 넣어주어야 합니다.

문자에 대응하는 빈도수를 저장하기 위해 checkFreq를 해시맵으로 선언합니다.

텍스트 길이만큼 for문이 돌아가게 하여 각 문자의 빈도수를 checkFreq에 저장합니다.
이때 만약 문자에 대응하는 빈도수가 0이면 빈도수에 1을 넣고, 0이 아니라면 빈도수+1을 저장해줍니다. 

for문을 이용하여 checkFreq에 저장된 문자에 대해 각각 노드를 생성한 후 우선순위 큐에 add해주었습니다. 

count를 이용하여 글에 사용된 문자의 갯수를 세었습니다. 

**coding**을 이용하여 트리를 만들고, **makeHuffmanCode**는 트리의 루트, 글자에 대한 허프만 코드를 저장할 String을 받아서 허프만 코드를 만들어 냅니다.

**makeHuffmanCode**에서는 받아온 트리의 루트가 **null**이 아니라면, 루트의 왼/오른쪽 노드를 루트로 삼아서 **makeHuffmanCode**를 재귀적으로 호출합니다.
허프만 코드는 왼쪽에 있는 노드이면 0, 오른쪽에 있는 노드이면 1이 붙어야 하기 때문에 왼쪽 노드를 루트로 삼는 **makeHuffmanCode**에는 **기존의 String+"0"**,
오른쪽 노드를 루트로 삼는 **makeHuffmanCode**에는 **기존의 String+"1"**을 넣어주어야 합니다.
마지막으로 노드에 문자가 들어있으면(안들어있는 노드도 있다.) **텍스트 : 허프만코드** 의 형식으로 출력하고
**CharToCode**라는 해시맵에 문자와 그에 대응하는 코드를 넣어줍니다.

마지막에는 글을 허프만 코드로 바꿔 출력하도록 for문을 작성하였습니다. 

### 코드 실행 결과

글이 제대로 저장되었고, 해당 글을 제대로 가져왔는지를 확인하기 위해 필요한 출력은 생략하였습니다.

```
A Birthday
Christina Rossetti.
My Heart is like a singing bird
Whose nest is in a watered shoot;
My heart is like and apple-tree
Whose boughs are bent with thickset fruit;
My heart is like a rainbow shell
That paddles in a halcyon sea;
My heart is gladder than all these
Because the birthday of my life
Is come, my love is come to me...

'e'=000
'M'=001000
'.'=001001
'k'=001010
'g'=001011
'd'=00110
'y'=00111
'h'=0100
'C'=01010000
','=01010001
'R'=01010010
'v'=01010011
'W'=0101010
'u'=0101011
'
'=01011
'c'=011000
'm'=011001
'
'=01101
'n'=01110
'b'=011110
'-'=01111100
'B'=01111101
'f'=0111111
's'=1000
't'=1001
'i'=1010
'a'=1011
'o'=11000
';'=1100100
'w'=1100101
'p'=1100110
'A'=110011100
'H'=110011101
'I'=110011110
'T'=110011111
'l'=11010
'r'=11011
' '=111
11001110011101111101101011011100101000011010110011101011011010101000001001101110101000100110100111010111110101001011000100010000001001100110100010010101101101001000001111111100111010001011110111001111101010001111101010100010100001111011111100010100111000101110100111000101111101111010101101100110010110110101010100100110001000000111011100001000100111110101000111101001110111101111111001011011100100011011000001101111000010011000110001001110010001011011010010000011111101000001011110111001111101010001111101010100010100001111011011100011011110111100110110011011010000011111001001110110000000101101101010101001001100010000001110111101100001010110010110100100011110111101100011101111000001110100111111001011010100101001111001010010100110000010101000000100111101111111101101010111010100111001000101101101001000001111110100000101111011100111110101000111110101010001010000111101111111011101110100111001111011000110010111110000100000110101101001011011011100111110100101110011111100110101100110001101101000010001111010011101111011111010010111101001100000111110000111011110000001011110010001011011010010000011111101000001011110111001111101010001110010111101010110011000110000110111111001010010110111011110111101011010111100101000001000000010110110101111101000011000101101010111000000111100101000001110111101010110111001010000110101100111111110000111111111011001001111111101010100111111000010110110111001111010001110110001100001100100001010001111011001001111111101011000010100110001111010100011101100011000011001000111100111000111011001000001001001001001001
```

### 압축률

각 문자의 등장 횟수는
```
'A':1   'B':2   'C':1   'H':1   'I':1
'
':10
'
':10
'M':4   'R':1   'T':1   'W':2   ' ':54
'a':24   'b':5   'c':5   'd':9  'e':33
'f':3   'g':4   'h':18   'i':24 'k':4
'l':13   ',':1   '-':1   'm':5  'n':11
'.':4   'o':13   'p':3   'r':14 's':22
't':23   'u':3   'v':1   'w':3  'y':9
';':3
```

영어, 특수문자는 문자 1개에 1byte이므로 
원본 글은 346byte=2768bit 입니다.

허프만 코드로 변환한 것은 1547bit 입니다. 

2768/1547=약 45%이므로
압축률은 약 45%라고 할 수 있습니다.


### 코드 시간복잡도 

`` O(n) ``


#### 보완해야 할 점

다른 문자에는 이상이 없으나 줄바꿈(엔터) 입력에 대한 허프만 코드가 2개가 생성되었습니다. 
살펴보니 모든 엔터는 나온 엔터에 대한 2개의 허프만 코드를 이어붙인 값으로 대치되었습니다. 
(예- '엔터1'=01, '엔터2'=10, **입력된 엔터=>0110** )

이를 해결하기 위해 인터넷 서칭도 해보았으나
적절한 해결 방안을 찾지 못하였습니다. 

중간고사 이후 기회가 된다면 줄바꿈 오류를 해결하고 싶습니다. 
